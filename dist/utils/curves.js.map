{"version":3,"file":"curves.js","sources":["../../src/utils/curves.ts"],"sourcesContent":["/**\n * Copyright IBM Corp. 2020, 2026\n */\n\nimport * as shape from 'd3-shape';\n\nexport type CurveArgs = {\n  name: string;\n  beta?: number;\n  tension?: number;\n  alpha?: number;\n};\n\n/**\n * A mapping of `string`s to D3 curve factories.\n *\n * This is useful for safely specifying curve functions in templates.\n */\nexport const CURVES: {\n  [key: string]: shape.CurveFactory | shape.CurveBundleFactory;\n} = {\n  basis: shape.curveBasis,\n  basisClosed: shape.curveBasisClosed,\n  basisOpen: shape.curveBasisOpen,\n  bumpX: shape.curveBumpX,\n  bumpY: shape.curveBumpY,\n  bundle: shape.curveBundle, // bundle#beta\n  cardinal: shape.curveCardinal, // cardinal#tension\n  cardinalClosed: shape.curveCardinalClosed,\n  cardinalOpen: shape.curveCardinalOpen,\n  catmullRom: shape.curveCatmullRom, // catmullRom#alpha\n  catmullRomClosed: shape.curveCatmullRomClosed,\n  catmullRomOpen: shape.curveCatmullRomOpen,\n  linear: shape.curveLinear,\n  linearClosed: shape.curveLinearClosed,\n  monotoneX: shape.curveMonotoneX,\n  monotoneY: shape.curveMonotoneY,\n  natural: shape.curveNatural,\n  step: shape.curveStep,\n  stepAfter: shape.curveStepAfter,\n  stepBefore: shape.curveStepBefore,\n};\n\n/**\n * Creates a curve function from a string or argument object.\n *\n * @param [curve] - When a string, looks up the corresponding curve factory and returns it.\n *                  When a `CurveArgs`, looks up the corresponding curve factory based on `curve.name`,\n *                  applies parameters, and returns the resulting curve function.\n * @throws {Error} - When there is no curve factory for the specified curve.\n */\nexport const curveFor = (\n  curve?: string | CurveArgs,\n): shape.CurveFactory | shape.CurveBundleFactory => {\n  if (!curve) return shape.curveLinear;\n  if (typeof curve === 'string') {\n    if (!CURVES[curve]) {\n      throw new Error(\n        `No curve factory \"${curve}\". See all curve factories here: https://github.com/d3/d3-shape#curves`,\n      );\n    }\n    return CURVES[curve];\n  }\n\n  const curveArgs: CurveArgs = curve;\n\n  if (curveArgs.name === 'bundle') {\n    return shape.curveBundle.beta(curveArgs.beta ?? 0.85);\n  } else if (curveArgs.name.startsWith('catmullRom')) {\n    return (CURVES[curveArgs.name] as shape.CurveCatmullRomFactory).alpha(\n      curveArgs.alpha ?? 0.5,\n    );\n  } else if (curveArgs.name.startsWith('cardinal')) {\n    return (CURVES[curveArgs.name] as shape.CurveCardinalFactory).tension(\n      curveArgs.tension ?? 0,\n    );\n  }\n\n  // In the event someone passes in curve args for a curve that takes no args,\n  // just return the appropriate scale\n  if (!CURVES[curveArgs.name]) {\n    throw new Error(\n      `No curve factory \"${curveArgs.name}\". See all curve factories here: https://github.com/d3/d3-shape#curves`,\n    );\n  }\n  return CURVES[curveArgs.name]!;\n};\n"],"names":["CURVES","basis","shape","curveBasis","basisClosed","curveBasisClosed","basisOpen","curveBasisOpen","bumpX","curveBumpX","bumpY","curveBumpY","bundle","curveBundle","cardinal","curveCardinal","cardinalClosed","curveCardinalClosed","cardinalOpen","curveCardinalOpen","catmullRom","curveCatmullRom","catmullRomClosed","curveCatmullRomClosed","catmullRomOpen","curveCatmullRomOpen","linear","curveLinear","linearClosed","curveLinearClosed","monotoneX","curveMonotoneX","monotoneY","curveMonotoneY","natural","curveNatural","step","curveStep","stepAfter","curveStepAfter","stepBefore","curveStepBefore","curveFor","curve","Error","curveArgs","name","beta","startsWith","alpha","tension"],"mappings":";;AAAA;AACA;AACA;;AAWA;AACA;AACA;AACA;AACA;AACO,MAAMA,MAEZ,GAAG;EACFC,KAAK,EAAEC,KAAK,CAACC,UAAU;EACvBC,WAAW,EAAEF,KAAK,CAACG,gBAAgB;EACnCC,SAAS,EAAEJ,KAAK,CAACK,cAAc;EAC/BC,KAAK,EAAEN,KAAK,CAACO,UAAU;EACvBC,KAAK,EAAER,KAAK,CAACS,UAAU;EACvBC,MAAM,EAAEV,KAAK,CAACW,WAAW;AAAE;EAC3BC,QAAQ,EAAEZ,KAAK,CAACa,aAAa;AAAE;EAC/BC,cAAc,EAAEd,KAAK,CAACe,mBAAmB;EACzCC,YAAY,EAAEhB,KAAK,CAACiB,iBAAiB;EACrCC,UAAU,EAAElB,KAAK,CAACmB,eAAe;AAAE;EACnCC,gBAAgB,EAAEpB,KAAK,CAACqB,qBAAqB;EAC7CC,cAAc,EAAEtB,KAAK,CAACuB,mBAAmB;EACzCC,MAAM,EAAExB,KAAK,CAACyB,WAAW;EACzBC,YAAY,EAAE1B,KAAK,CAAC2B,iBAAiB;EACrCC,SAAS,EAAE5B,KAAK,CAAC6B,cAAc;EAC/BC,SAAS,EAAE9B,KAAK,CAAC+B,cAAc;EAC/BC,OAAO,EAAEhC,KAAK,CAACiC,YAAY;EAC3BC,IAAI,EAAElC,KAAK,CAACmC,SAAS;EACrBC,SAAS,EAAEpC,KAAK,CAACqC,cAAc;EAC/BC,UAAU,EAAEtC,KAAK,CAACuC;AACpB;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACO,MAAMC,QAAQ,GACnBC,KAA0B,IACwB;AAClD,EAAA,IAAI,CAACA,KAAK,EAAE,OAAOzC,KAAK,CAACyB,WAAW;AACpC,EAAA,IAAI,OAAOgB,KAAK,KAAK,QAAQ,EAAE;AAC7B,IAAA,IAAI,CAAC3C,MAAM,CAAC2C,KAAK,CAAC,EAAE;AAClB,MAAA,MAAM,IAAIC,KAAK,CACb,CAAA,kBAAA,EAAqBD,KAAK,wEAC5B,CAAC;AACH,IAAA;IACA,OAAO3C,MAAM,CAAC2C,KAAK,CAAC;AACtB,EAAA;EAEA,MAAME,SAAoB,GAAGF,KAAK;AAElC,EAAA,IAAIE,SAAS,CAACC,IAAI,KAAK,QAAQ,EAAE;IAC/B,OAAO5C,KAAK,CAACW,WAAW,CAACkC,IAAI,CAACF,SAAS,CAACE,IAAI,IAAI,IAAI,CAAC;EACvD,CAAC,MAAM,IAAIF,SAAS,CAACC,IAAI,CAACE,UAAU,CAAC,YAAY,CAAC,EAAE;AAClD,IAAA,OAAQhD,MAAM,CAAC6C,SAAS,CAACC,IAAI,CAAC,CAAkCG,KAAK,CACnEJ,SAAS,CAACI,KAAK,IAAI,GACrB,CAAC;EACH,CAAC,MAAM,IAAIJ,SAAS,CAACC,IAAI,CAACE,UAAU,CAAC,UAAU,CAAC,EAAE;AAChD,IAAA,OAAQhD,MAAM,CAAC6C,SAAS,CAACC,IAAI,CAAC,CAAgCI,OAAO,CACnEL,SAAS,CAACK,OAAO,IAAI,CACvB,CAAC;AACH,EAAA;;AAEA;AACA;AACA,EAAA,IAAI,CAAClD,MAAM,CAAC6C,SAAS,CAACC,IAAI,CAAC,EAAE;IAC3B,MAAM,IAAIF,KAAK,CACb,CAAA,kBAAA,EAAqBC,SAAS,CAACC,IAAI,wEACrC,CAAC;AACH,EAAA;AACA,EAAA,OAAO9C,MAAM,CAAC6C,SAAS,CAACC,IAAI,CAAC;AAC/B;;;;"}