{"version":3,"file":"rounded-rect.js","sources":["../../src/utils/rounded-rect.ts"],"sourcesContent":["/**\n * Copyright IBM Corp. 2020, 2026\n */\n\ninterface Rect {\n  x: number;\n  y: number;\n  width: number;\n  height: number;\n}\n\ninterface BorderRadius {\n  topLeft: number;\n  topRight: number;\n  bottomLeft: number;\n  bottomRight: number;\n}\n\n// Start drawing at x, y\nconst move = (x: number, y: number) => `M ${x},${y}`;\n\n// Draw lines using y and x as deltas instead of coordinates\nconst vLine = (y: number) => `v ${y}`;\nconst hLine = (x: number) => `h ${x}`;\n\n// A clockwise-turning small arc with two radii. Since this is clockwise turning,\n// The radii are broken down as first and second radii components instead of vertical\n// and horizontal components. This means it is up to the caller to determine if the radii\n// order should be v,h or h,v based on the corner being drawn.\nconst arc = (rx: number, ry: number, hDir: number, vDir: number) =>\n  `a ${rx},${ry} 0 0 1 ${rx * hDir},${ry * vDir}`;\n\n/**\n * A function that takes the bounding box of a rectangle along with all four\n * border radii and generates a valid SVG path string with the correct lines\n * and arcs.\n *\n * @param rect - The rectangle to round.\n * @param radii - The four radii for the rectangle.\n * @param safe - When true, radii are clipped to never exceed width/height.\n * @returns - A valid SVG path string (to use as a `d` attribute value)\n */\nexport function roundedRect(\n  rect: Rect,\n  radii: BorderRadius,\n  safe = false,\n): string {\n  let rtrx = radii.topRight;\n  let rbrx = radii.bottomRight;\n  let rblx = radii.bottomLeft;\n  let rtlx = radii.topLeft;\n  let rtry = rtrx;\n  let rbry = rbrx;\n  let rbly = rblx;\n  let rtly = rtlx;\n\n  // When creating a safe roundedRect, radii that exceed the width or height of the rectangle\n  // are truncated. This can result in oblong radii which is why the four radii are expanded into\n  // eight total variables (splitting radii into vertical and horizontal components).\n  if (safe) {\n    if (rtrx + rtlx > rect.width) {\n      const rsum = rtrx + rtlx;\n      rtrx = (rect.width * rtrx) / rsum;\n      rtlx = (rect.width * rtlx) / rsum;\n    }\n\n    if (rtry + rbry > rect.height) {\n      const rsum = rtry + rbry;\n      rtry = (rect.height * rtry) / rsum;\n      rbry = (rect.height * rbry) / rsum;\n    }\n\n    if (rbrx + rblx > rect.width) {\n      const rsum = rbrx + rblx;\n      rbrx = (rect.width * rbrx) / rsum;\n      rblx = (rect.width * rblx) / rsum;\n    }\n\n    if (rbly + rtly > rect.height) {\n      const rsum = rbly + rtly;\n      rbly = (rect.height * rbly) / rsum;\n      rtly = (rect.height * rtly) / rsum;\n    }\n  }\n\n  return [\n    move(rect.x, rect.y + rtly),\n    arc(rtlx, rtly, 1, -1),\n    hLine(rect.width - rtlx - rtrx),\n    arc(rtrx, rtry, 1, 1),\n    vLine(rect.height - rtry - rbry),\n    arc(rbrx, rbry, -1, 1),\n    hLine(-rect.width + rbrx + rblx),\n    arc(rblx, rbly, -1, -1),\n    vLine(-rect.height + rbly + rtly),\n    'Z',\n  ].join(' ');\n}\n"],"names":["move","x","y","vLine","hLine","arc","rx","ry","hDir","vDir","roundedRect","rect","radii","safe","rtrx","topRight","rbrx","bottomRight","rblx","bottomLeft","rtlx","topLeft","rtry","rbry","rbly","rtly","width","rsum","height","join"],"mappings":"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"}