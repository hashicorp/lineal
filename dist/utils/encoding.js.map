{"version":3,"file":"encoding.js","sources":["../../src/utils/encoding.ts"],"sourcesContent":["/**\n * Copyright IBM Corp. 2020, 2026\n */\n\nexport type AccessorFn = (d: any) => any;\nexport type Accessor = string | number | AccessorFn;\n\n/**\n * A utility class that contains an accessor function\n * and metadata.\n *\n * Encodings are used by marks to model what properties of\n * a mark can be \"encoded\" (derived from a scale and a dataset).\n */\nexport class Encoding {\n  /** The name of a the field when the Encoding is using a field accessor;\n   * `undefined` otherwise. */\n  field?: string;\n  /** The accessor function that will return the appropriate value from\n   * a dataset for the encoding. */\n  accessor: AccessorFn;\n\n  /**\n   * Creates an Accessor and captures metadata.\n   *\n   * ```\n   * const fieldAccessor = new Accessor('avg');\n   * const customAccessor = new Accessor(d => d.high - d.low);\n   * const staticAccessor = new Accessor(12);\n   *\n   * const datum = {\n   *   avg: 100,\n   *   high: 112,\n   *   low: 78,\n   * };\n   *\n   * console.log(fieldAccessor.accessor(datum)); // 100\n   * console.log(customAccessor.accessor(datum)); // 34\n   * console.log(staticAccessor.accessor(datum)); // 12\n   * ```\n   *\n   * @param accessor - When the accessor is a `function`, the function is the accessor.\n   *                   When the accessor is a `string`, the string is a field accessor.\n   *                   When the accessor is a `number`, the accessor always returns that number.\n   */\n  constructor(accessor: Accessor) {\n    if (typeof accessor === 'string') {\n      this.field = accessor;\n      this.accessor = (d: any) => d[accessor];\n    } else if (typeof accessor === 'number') {\n      this.accessor = () => accessor;\n    } else {\n      this.accessor = accessor;\n    }\n  }\n}\n"],"names":["Encoding","field","accessor","constructor","d"],"mappings":"AAAA;AACA;AACA;;AAKA;AACA;AACA;AACA;AACA;AACA;AACA;AACO,MAAMA,QAAQ,CAAC;AACpB;AACF;EACEC,KAAK;AACL;AACF;EACEC,QAAQ;;AAER;AACF;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;EACEC,WAAWA,CAACD,QAAkB,EAAE;AAC9B,IAAA,IAAI,OAAOA,QAAQ,KAAK,QAAQ,EAAE;MAChC,IAAI,CAACD,KAAK,GAAGC,QAAQ;MACrB,IAAI,CAACA,QAAQ,GAAIE,CAAM,IAAKA,CAAC,CAACF,QAAQ,CAAC;AACzC,IAAA,CAAC,MAAM,IAAI,OAAOA,QAAQ,KAAK,QAAQ,EAAE;AACvC,MAAA,IAAI,CAACA,QAAQ,GAAG,MAAMA,QAAQ;AAChC,IAAA,CAAC,MAAM;MACL,IAAI,CAACA,QAAQ,GAAGA,QAAQ;AAC1B,IAAA;AACF,EAAA;AACF;;;;"}