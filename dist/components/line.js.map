{"version":3,"file":"line.js","sources":["../../src/components/line.gts"],"sourcesContent":["/**\n * Copyright IBM Corp. 2020, 2026\n */\n\nimport Component from '@glimmer/component';\nimport { cached } from '@glimmer/tracking';\nimport { line } from 'd3-shape';\n\nimport { ScaleLinear } from '../utils/scale.ts';\nimport { Encoding } from '../utils/encoding.ts';\nimport { curveFor } from '../utils/curves.ts';\nimport { scaleFrom, qualifyScale } from '../utils/mark-utils.ts';\n\nimport type { Scale } from '../utils/scale.ts';\nimport type { Accessor } from '../utils/encoding.ts';\nimport type { CurveArgs } from '../utils/curves.ts';\n\nexport interface LineSignature {\n  Args: {\n    data: any[];\n    x: Accessor;\n    y: Accessor;\n    xScale?: Scale;\n    yScale?: Scale;\n    curve?: string | CurveArgs;\n    defined?: (d: any) => boolean;\n  };\n\n  Blocks: {\n    default: [];\n  };\n\n  Element: SVGPathElement;\n}\n\nexport default class Line extends Component<LineSignature> {\n  @cached\n  get x() {\n    return new Encoding(this.args.x);\n  }\n\n  @cached\n  get y() {\n    return new Encoding(this.args.y);\n  }\n\n  @cached\n  get xScale() {\n    const scale = scaleFrom(this.args.x, this.args.xScale) || new ScaleLinear();\n    qualifyScale(this, scale, this.x, 'x');\n    return scale;\n  }\n\n  @cached\n  get yScale() {\n    const scale = scaleFrom(this.args.y, this.args.yScale) || new ScaleLinear();\n    qualifyScale(this, scale, this.y, 'y');\n    return scale;\n  }\n\n  @cached\n  get curve() {\n    return curveFor(this.args.curve);\n  }\n\n  @cached\n  get d() {\n    if (!this.xScale.isValid || !this.yScale.isValid) return '';\n\n    const generator = line()\n      .curve(this.curve)\n      .defined(\n        this.args.defined ||\n          ((d) => this.y.accessor(d) != null && this.x.accessor(d) != null),\n      )\n      .x((d) => this.xScale.compute(this.x.accessor(d)))\n      .y((d) => this.yScale.compute(this.y.accessor(d)));\n\n    return generator(this.args.data);\n  }\n\n  <template>\n    <path d={{this.d}} ...attributes></path>\n  </template>\n}\n"],"names":["Line","Component","x","Encoding","args","n","prototype","cached","y","xScale","scale","scaleFrom","ScaleLinear","qualifyScale","yScale","curve","curveFor","d","isValid","generator","line","defined","accessor","compute","data","setComponentTemplate","precompileTemplate","strictMode"],"mappings":"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"}