<h2>Stacked Area</h2>
<svg height='300' width='800' class='no-overflow m-100'>
  {{#let
    (scale-linear range='0..800' domain='..')
    (scale-linear range='300..0' domain='0..')
    as |xScale yScale|
  }}
    {{#if (and xScale.isValid yScale.isValid)}}
      {{log yScale}}
      <Lineal::Axis
        @scale={{yScale}}
        @orientation='left'
        @includeDomain={{false}}
      />
      <Lineal::Axis
        @scale={{xScale}}
        @orientation='bottom'
        transform='translate(0,300)'
      />
      <Lineal::Gridlines
        @scale={{yScale}}
        @direction='horizontal'
        @length='800'
        stroke-dasharray='5 5'
      />
    {{/if}}
    <Lineal::Area
      @data={{this.paddedFrequencyByDay}}
      @curve='natural'
      @x='hour'
      @y='value'
      @color='day'
      @xScale={{xScale}}
      @yScale={{yScale}}
      @colorScale='ordinal'
    />
    <rect
      x='0'
      y='0'
      width='800'
      height='300'
      tabindex='0'
      fill='transparent'
      class='interactor'
      {{interactor-cartesian-horizontal
        data=this.paddedFrequencyByDay
        xScale=xScale
        x='hour'
        y='value'
        onSeek=this.updateActiveDataPop
      }}
    ></rect>
    {{#if (and xScale.isValid yScale.isValid)}}
      {{#if this.activePop}}
        <g class='interaction-overlay'>
          <line
            stroke='red'
            stroke-width='2'
            x1={{xScale.compute this.activePop.datum.datum.hour}}
            x2={{xScale.compute this.activePop.datum.datum.hour}}
            y1='0'
            y2='300'
          ></line>
          {{#each this.activePop.data as |d|}}
            <circle
              cx={{xScale.compute d.datum.hour}}
              cy={{yScale.compute d.datum.value}}
              r='5'
              fill='black'
            ></circle>
          {{/each}}
        </g>
      {{/if}}
    {{/if}}
  {{/let}}
</svg>

<h2>Stacked Area 2</h2>
<button type='button' {{on 'click' this.appendTestData}}>Append</button>
<p>{{this.stacked._categories}}</p>
<svg height='300' width='800' class='no-overflow m-100'>
  {{! (stack-y data=this.paddedFrequencyByDay x='hour' y='value' z='day') }}
  {{#let
    (scale-linear range='0..800' domain='0..30')
    (scale-linear range='300..0' domain='0..')
    this.stacked
    as |xScale yScale stacked|
  }}
    {{#if (and xScale.isValid yScale.isValid)}}
      <Lineal::Axis
        @scale={{yScale}}
        @orientation='left'
        @includeDomain={{false}}
      />
      <Lineal::Axis
        @scale={{xScale}}
        @orientation='bottom'
        transform='translate(0,300)'
      />
      <Lineal::Gridlines
        @scale={{yScale}}
        @direction='horizontal'
        @length='800'
        stroke-dasharray='5 5'
      />
    {{/if}}
    <Lineal::Area
      @data={{stacked.data}}
      @x='x'
      @y='y'
      @xScale={{xScale}}
      @yScale={{yScale}}
      @colorScale='ordinal'
    />
    {{#if (and xScale.isValid yScale.isValid)}}
      {{#if this.activeStackSlice}}
        <g class='interaction-overlay'>
          <line
            stroke='red'
            stroke-width='2'
            x1={{xScale.compute this.activeStackSlice.datum.datum.hour}}
            x2={{xScale.compute this.activeStackSlice.datum.datum.hour}}
            y1='0'
            y2='300'
          ></line>
          {{#each
            (stacked.stack (map-by 'datum' this.activeStackSlice.data))
            as |d|
          }}
            <circle
              cx={{xScale.compute d.x}}
              cy={{yScale.compute d.y}}
              r='5'
              fill='black'
            ></circle>
            <text
              x={{xScale.compute d.x}}
              y={{yScale.compute d.y}}
              dx='10'
              text-anchor='start'
            >{{d.key}}</text>
          {{/each}}
        </g>
      {{/if}}
    {{/if}}
    <rect
      x='0'
      y='0'
      width='800'
      height='300'
      tabindex='0'
      fill='transparent'
      class='interactor'
      {{interactor-cartesian-horizontal
        data=stacked.dataIn
        xScale=xScale
        x='hour'
        y='value'
        onSeek=this.updateActiveStackDatum
      }}
    ></rect>
  {{/let}}
</svg>
