---
title: Dev Log 02
---

# Dev Log 02: Making a Line Chart

Since the last dev log, a few new features have shipped:

1. Axes
2. Gridlines
3. Fluid container

To celebrate, I thought blogging in a tutorial format might be fun. So we're making a Line Chart today.

## Step 1: Gather your data

A line chart is typically used to encode a continuous dataset across two dimensions, with the independent variable encoded on `x` (often this is time) and the dependent variable encoded on `y`.

For simplicity we will be using a sine wave with a linearly increasing magnitude for funsies. This is implemented as a helper just because as soon as a component example requires a backing class, the component gets shoved into an examples section instead of inline.

So here's our data for 10 values.

```hbs preview-template
<table>
  <thead>
    <tr>
      <th>x</th>
      <th>sin(x) * x/5</th>
    </tr>
  </thead>
  <tbody>
    {{#each (generate-sine 10) as |row|}}
      <tr>
        <td>{{row.x}}</td>
        <td>{{row.y}}</td>
      </tr>
    {{/each}}
  </tbody>
</table>
```

## Step 2: Create a line

Alright, now let's plot it. This should look familiar if you read the last dev log.

```hbs preview-template
<svg width='800' height='200'>
  {{#let
    (scale-linear range='15..785')
    (scale-linear range='190..10')
    (generate-sine 50)
    as |xScale yScale data|
  }}
    <Lineal::Line
      @data={{data}}
      @xScale={{xScale}}
      @yScale={{yScale}}
      @x='x'
      @y='y'
      @curve='natural'
      fill='transparent'
      stroke='black'
      stroke-width='2'
    />
  {{/let}}
</svg>
```

Oh yeah, that's the stuff. Immediately this is more useful than a table of data, but still, we want to understand specific values in addition to the general shape. So let's add some axes.

## Step 3: Add axes

The new `Lineal::Axis` component is a Glimmer rewrite of [d3-axis](https://github.com/d3/d3-axis). If you aren't familiar with d3-axis, you can think of it is a miniature data visualization that uses a scale as a data source. Scales in d3 are responsible for their own default tick generation and formatting based on the scale type and domain. 

Since we already have scales in the template context, we can pass them along to our axis components, which will treat them as tracked properties that SVG elements can be derived from.

```hbs preview-template
<svg width='800' height='200' style='margin: 50px; overflow: visible;'>
  {{#let
    (scale-linear range='0..800')
    (scale-linear range='200..0')
    (generate-sine 51)
    as |xScale yScale data|
  }}
    <Lineal::Line
      @data={{data}}
      @xScale={{xScale}}
      @yScale={{yScale}}
      @x='x'
      @y='y'
      @curve='natural'
      fill='transparent'
      stroke='black'
      stroke-width='2'
    />
    {{#if (and xScale.isValid yScale.isValid)}}
      <Lineal::Axis
        @scale={{yScale}}
        @orientation='left'
        fill='transparent'
      />
      <Lineal::Axis
        @scale={{xScale}}
        @orientation='bottom'
        @tickValues={{array 2 8 14 20.5 27 33 39 45.5 50}}
        transform='translate(0,{{yScale.compute 0}})'
        fill='transparent'
      />
    {{/if}}
  {{/let}}
</svg>
```

Just like with d3-axis, `@tickValues` can be specified to override the default ticks generated by a scale. Here the x-axis ticks are chosen to always miss the plotted line. We don't always have the luxury of tailoring a visualization to a dataset, but it's always nice to do it when we can!

## Step 4: Add gridlines

For the full graph paper experience, we want gridlines too. Traditionally with d3, gridlines are implemented using d3-axis. By tweaking the tick size and imperatively removing the tick `text` elements, we get lines that stretch across our plot area.

Since this is such a common pattern and since we aren't in the business of imperatively tweaking things, Lineal has a `Gridlines` component.

```hbs preview-template
<svg width='800' height='200' style='margin: 50px; overflow: visible;'>
  {{#let
    (scale-linear range='0..800')
    (scale-linear range='200..0')
    (generate-sine 51)
    as |xScale yScale data|
  }}
    <Lineal::Line
      @data={{data}}
      @xScale={{xScale}}
      @yScale={{yScale}}
      @x='x'
      @y='y'
      @curve='natural'
      fill='transparent'
      stroke='black'
      stroke-width='2'
    />
    {{#if (and xScale.isValid yScale.isValid)}}
      <Lineal::Gridlines
        @scale={{yScale}}
        @direction='horizontal'
        @length={{800}}
        stroke-dasharray='5 5'
      />
      <Lineal::Gridlines
        @scale={{xScale}}
        @direction='vertical'
        @length={{200}}
        @lineValues={{array 5 11 17 23.5 30 36 42 48.5}}
        stroke-dasharray='5 5'
      />
      <Lineal::Axis
        @scale={{yScale}}
        @orientation='left'
        fill='transparent'
      />
      <Lineal::Axis
        @scale={{xScale}}
        @orientation='bottom'
        @tickValues={{array 2 8 14 20.5 27 33 39 45.5 50}}
        transform='translate(0,{{yScale.compute 0}})'
        fill='transparent'
      />
    {{/if}}
  {{/let}}
</svg>
```

## Step 5: Style everything

## Step 6: Rethink dimensions


